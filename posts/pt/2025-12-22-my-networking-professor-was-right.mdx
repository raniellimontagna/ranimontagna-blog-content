---
title: 'Meu professor de Redes tinha raz√£o (e eu demorei 5 anos pra perceber)'
date: '2025-12-22'
description: >-
  Da aula de Redes ignorada na faculdade ao servidor caseiro: como organizei
  minha rede dom√©stica com Pi-hole, Proxmox e VPN.
tags:
  - homelab
  - redes
  - proxmox
  - pihole
  - self-hosting
published: true
coverImage: 'https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=1200&q=80'
---

Na faculdade, eu confesso: as aulas de Redes de Computadores eram aquelas que eu prestava menos aten√ß√£o. IP, m√°scara de sub-rede, DNS... "Isso √© coisa de infra, desenvolvedor n√£o precisa saber disso", pensava eu.

Anos depois, c√° estou eu ‚Äî com um servidor rodando em casa, gerenciando IPs como se fosse a coisa mais natural do mundo.

---

## O que me fez mudar de ideia?

Tudo come√ßou quando a quantidade de dispositivos em casa explodiu. Computador, notebook, celulares, TV, l√¢mpadas inteligentes, Echo Dots, ar-condicionado... de repente eu tinha dezenas de coisas conectadas e nenhum controle sobre nada.

Queria acessar arquivos do PC pelo celular, controlar a casa de qualquer lugar, e entender por que minha internet parecia lenta mesmo com uma boa conex√£o. A resposta? Uma bagun√ßa de dispositivos competindo por banda sem nenhuma organiza√ß√£o.

Foi a√≠ que decidi: **vou organizar essa rede**.

---

## A Arquitetura Geral

Depois de muito estudo e experimenta√ß√£o, cheguei nessa estrutura:

![Diagrama da rede dom√©stica](/images/posts/homelab-network-diagram.jpg)

**Segmenta√ß√£o por fun√ß√£o:**
- `.2 - .19` ‚Üí Infraestrutura (servidores, DNS, automa√ß√£o)
- `.20 - .29` ‚Üí Pessoas (PCs, celulares, TV)
- `.50 - .59` ‚Üí IoT Hubs (Echo Dots, ar-condicionado)
- `.60 - .99` ‚Üí IoT Pontas (l√¢mpadas, smart plugs)
- `.100+` ‚Üí DHCP para visitantes

Parece exagero? Talvez. Mas quando algo d√° problema, eu sei **exatamente** onde procurar. E mais importante: consigo configurar regras espec√≠ficas para cada "tipo" de dispositivo.

---

## DNS: O cora√ß√£o invis√≠vel da internet

Aqui preciso fazer uma pausa pra explicar algo que eu ignorava completamente: **DNS**.

Toda vez que voc√™ digita "google.com" no navegador, seu computador n√£o faz ideia do que √© isso. Ele precisa perguntar a um servidor DNS: "Ei, qual o IP desse tal de google.com?". O servidor responde algo como "142.250.79.14", e a√≠ sim a conex√£o acontece.

Isso acontece **centenas de vezes por dia** ‚Äî n√£o s√≥ quando voc√™ navega, mas quando apps verificam atualiza√ß√µes, quando seu celular "liga pra casa", quando a TV smart carrega propagandas...

E √© exatamente aqui que entra a m√°gica.

---

## Pi-hole: Adeus, an√∫ncios

O **Pi-hole** √© um servidor DNS que roda na sua rede local. Toda requisi√ß√£o DNS passa por ele antes de ir pra internet. E a sacada √© simples: ele tem uma lista gigante de dom√≠nios conhecidos por servir an√∫ncios e rastreadores.

Quando algu√©m na rede tenta acessar `ads.facebook.com` ou `tracking.google-analytics.com`, o Pi-hole simplesmente... n√£o responde. O an√∫ncio n√£o carrega. O rastreador n√£o funciona.

**O resultado na minha rede em 24 horas:**

![Dashboard do Pi-hole](/images/posts/pihole-dashboard.png)

- ‚úÖ **45.871** requisi√ß√µes DNS processadas
- üö´ **8.320** bloqueadas (18.1%)
- üìã **1.3 milh√£o** de dom√≠nios na blocklist

Isso significa: YouTube com menos an√∫ncios, apps sem banners invasivos, e smartphones que param de "ligar pra casa" de 5 em 5 minutos.

E como backup, uso o DNS p√∫blico da Cloudflare (1.1.1.1) ‚Äî se o Pi-hole cair, a internet continua funcionando.

---

## Proxmox: Um computador, v√°rios sistemas

Agora a pergunta: onde roda tudo isso?

Em vez de ter 5 computadores diferentes consumindo energia e espa√ßo, tenho **um √∫nico servidor** com Proxmox VE. Ele √© um sistema operacional de virtualiza√ß√£o que permite criar **containers LXC** e **m√°quinas virtuais** que rodam de forma completamente isolada.

Pense assim: √© como ter v√°rios computadores dentro de um s√≥, cada um fazendo seu trabalho sem interferir nos outros.

**O que roda no meu Proxmox:**

| Servi√ßo | Fun√ß√£o |
|---------|--------|
| üìÅ **Nextcloud** | Meu pr√≥prio "Google Drive" ‚Äî arquivos sincronizados entre todos os dispositivos |
| üè† **Home Assistant** | Automa√ß√£o da casa ‚Äî controlo luzes, ar-condicionado, e monitoro sensores |
| üé¨ **Jellyfin** | Netflix pessoal ‚Äî minha biblioteca de m√≠dia acess√≠vel de qualquer lugar |
| üîí **Pi-hole DNS** | Bloqueio de an√∫ncios em rede |
| üîÑ **Node-RED** | Automa√ß√µes visuais ‚Äî integro servi√ßos de forma f√°cil |

Se um servi√ßo der problema, reinicio s√≥ ele. Se quiser testar algo novo, crio um container, testo, e deleto se n√£o gostar. **Zero risco pro restante do sistema.**

---

## VPN: Acesso de qualquer lugar

Uma das funcionalidades que mais uso √© o acesso remoto via **OpenVPN**. Com ela, mesmo estando fora de casa (no trabalho, viajando, em qualquer lugar), consigo acessar minha rede local como se estivesse l√°.

Isso significa: acessar meus arquivos no Nextcloud, controlar a casa pelo Home Assistant, ou debugar algo no servidor ‚Äî tudo de forma segura, criptografada.

---

## O que aprendi com tudo isso?

1. **Redes n√£o s√£o s√≥ teoria** ‚Äî entender como seu tr√°fego flui muda completamente sua perspectiva sobre desenvolvimento
2. **Self-hosting √© empoderador** ‚Äî voc√™ controla seus dados, n√£o depende de servi√ßos terceiros
3. **N√£o precisa de hardware caro** ‚Äî um PC usado ou um mini PC funciona perfeitamente
4. **Documenta√ß√£o √© vida** ‚Äî aquele diagrama de rede salva horas de debug
5. **Seguran√ßa em camadas** ‚Äî DNS bloqueando trackers, VPN criptografando acesso, rede segmentada

Se voc√™ tamb√©m dormia nas aulas de Redes... talvez seja hora de acordar. üòâ

---

*E voc√™, tem algum projeto de homelab ou ideia de organizar melhor sua rede? Conta a√≠ nos coment√°rios!*
